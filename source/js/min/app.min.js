App=angular.module("App",["ngSanitize"]),App.filter("nl2br",function(){return function(e){return e.replace(/\n/g,"<br>")}}),App.filter("parseUrl",function(){var e=/(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?/gi;return function(t,n,a){return a=a||null,angular.forEach(t.match(e),function(e){t=a?t.replace(e,'<a target="'+n+'" href='+e+' style="'+a+'">'+e+"</a>"):t.replace(e,'<a target="'+n+'" href='+e+">"+e+"</a>")}),t}}),App.controller("TimelineController",["$scope","$filter",function(e){$.getJSON("source/js/jsons/1.js",function(t){e.$apply(function(){e.messages=t.messages,e.author=t.author,e.detail=t.detail})}),e.now_date=Math.round((new Date).getTime()),e.add_new=!1,e.newMessage="",e.showMessageFrom=function(){e.add_new=!0,e.now_date=Math.round((new Date).getTime())},e.hideMessageFrom=function(){e.add_new=!1},e.addMessage=function(){""==e.newMessage?alert("入力してください"):(e.add_new=!1,e.messages.push({body:e.newMessage,author:e.author,date:Math.round((new Date).getTime())}),e.newMessage="")},e.switchClient=function(t){$.getJSON("source/js/jsons/"+t+".js",function(t){e.$apply(function(){e.messages=t.messages,e.author=t.author,e.detail=t.detail})})}}]);